<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper SYSTEM "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >


<mapper namespace="com.mingzhe.credit.manage.mapper.NplmLoanContractMapper">
    <select id="getNplmLoanContractMapList" resultMap="contractMap" >

        SELECT nlc.`ID` , nlc.`LOAN_CONTRACT_NUM` , nca.`id` nca_id ,nca.`loan_contract_id`,
        nbi.`id` nbi_id ,nbi.`CLIENT_NAME`
        FROM nplm_loan_contract nlc INNER JOIN nplm_contract_attribute nca
        ON  nlc.`ID`= nca.`loan_contract_id`
        INNER JOIN nplm_borrower_info nbi
        ON nlc.`borrower_id` = nbi.`id`
    </select>
    <resultMap id="contractMap" type="com.mingzhe.credit.bean.NplmLoanContract" autoMapping="true">
        <result property="id" column="id" ></result>
        <collection property="nplmBorrowerInfoList" ofType="com.mingzhe.credit.bean.NplmBorrowerInfo" autoMapping="true">
            <result property="id" column="nca_id" ></result>
        </collection>
        <collection property="nplmContractAttributeList" ofType="com.mingzhe.credit.bean.NplmContractAttribute" autoMapping="true">
            <result property="id" column="nbi_id" ></result>
        </collection>
    </resultMap>





</mapper>